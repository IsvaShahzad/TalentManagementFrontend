{
  "version": 3,
  "sources": ["../../../../Server/node_modules/python-shell/index.ts", "../../../../Server/node_modules/pii-redactor/src/index.js"],
  "sourcesContent": [null, "// src/index.js\n\nconst path = require('path');\nconst { PythonShell } = require('python-shell');\n\n/**\n * Processes a single file for PII extraction and redaction.\n * @param {string} inputPath - Path to the input file.\n * @param {string} outputPath - Path to save the redacted file.\n * @param {object} piiTypes - JSON object specifying which PII types to detect.\n * @returns {Promise<object>} - Result of the processing.\n */\nfunction processFile(inputPath, outputPath, piiTypes = {}) {\n    return new Promise((resolve, reject) => {\n        const options = {\n            mode: 'text',\n            pythonOptions: ['-u'], // unbuffered output\n            scriptPath: path.join(__dirname, '../python'),\n            args: [\n                'process-file',\n                '--input', inputPath,\n                '--output', outputPath,\n                '--pii-types', JSON.stringify(piiTypes)\n            ]\n        };\n\n        PythonShell.run('cli.py', options, (err, results) => {\n            if (err) return reject(err);\n            try {\n                const result = JSON.parse(results[results.length - 1]);\n                resolve(result);\n            } catch (parseErr) {\n                reject(parseErr);\n            }\n        });\n    });\n}\n\n/**\n * Processes all supported files in a folder for PII extraction and redaction.\n * @param {string} inputFolder - Path to the input folder.\n * @param {string} outputFolder - Path to save the redacted files.\n * @param {object} piiTypes - JSON object specifying which PII types to detect.\n * @returns {Promise<object>} - Result of the processing.\n */\nfunction processFolder(inputFolder, outputFolder, piiTypes = {}) {\n    return new Promise((resolve, reject) => {\n        const options = {\n            mode: 'text',\n            pythonOptions: ['-u'],\n            scriptPath: path.join(__dirname, '../python'),\n            args: [\n                'process-folder',\n                '--input', inputFolder,\n                '--output', outputFolder,\n                '--pii-types', JSON.stringify(piiTypes)\n            ]\n        };\n\n        PythonShell.run('cli.py', options, (err, results) => {\n            if (err) return reject(err);\n            try {\n                const result = JSON.parse(results[results.length - 1]);\n                resolve(result);\n            } catch (parseErr) {\n                reject(parseErr);\n            }\n        });\n    });\n}\n\nmodule.exports = {\n    processFile,\n    processFolder\n};\n"],
  "mappings": "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",
  "names": []
}
